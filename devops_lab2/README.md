# Devops-лабораторная работа №2

## Цель

Написать два Dockerfile – плохой и хороший. 
Плохой должен запускаться и работать корректно, но в нём должно быть не менее 3 “bad practices”. 
В хорошем Dockerfile они должны быть исправлены. В Readme описать все плохие практики из кода 
Dockerfile и почему они плохие, как они были исправлены в хорошем  Dockerfile, а также 
две плохие практики использованию контейнера

## Ход работы

### Плохой Dockerfile
```
FROM python:latest

WORKDIR /app

COPY requirements.txt ./

RUN pip install --upgrade pip
RUN pip install -r requirements.txt

COPY . .

ENTRYPOINT python docker_lab.py
```
Что в нем плохого?
- Использован тег ```latest```

  Лучше использовать предсказуемый в поведении образ с указанием с точной версии, это позволит быть уверенным, что новая сборка будет той же версии, что и предыдущая, а также, что сборка непредвиденно не упадет


- Дважды использован ```RUN```

  Эти действия следует объединить в команду с помощью &&, так как увеличение количества слоев ведет к увеличению объема образа


- Параметры команды ```CMD``` не объединены в массив

  Лучше объединять аргументы в массив, так как тогда тогда они будут обработаны однозначно (команда `python` и аргумент `docker_lab.py`)


### Хороший Dockerfile
```
FROM python:3.9

WORKDIR /app

COPY requirements.txt ./

RUN pip install --upgrade pip && pip install -r requirements.txt

COPY . .

ENTRYPOINT ["python", "docker_lab.py"]
```
Что исправлено?
- Указана конкретная версия ```python```
- Две команды ```RUN``` объединены в одну
- Аргументы команды ```ENTRYPOINT``` объединены в массив

### Плохие практики по использованию контейнеров

- Не стоит создавать большие образы, перегруженные лишними файлами и библиотеками. 
Лучше подключать только те пакеты и копировать те файлы, которые будут точно использованы в дальнейшем.
Это позволит уменьшить количество слоев и уменьшить объем образа

- Не стоит запускать какие-либо процессы от root-a. 
При взламывании контейнера злоумышленник получит root права, что даст волю его фантазии, 
а также доступ к управлению данными и процессами


